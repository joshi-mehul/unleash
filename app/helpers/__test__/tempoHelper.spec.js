/* eslint-disable */
import { expect } from 'chai';
import tempoHelper from '../tempoHelper';

const paths = {"isLoading":false,"list":[{"id":"f03c7d74-1977-44a2-847a-e9117342d16e","userId":"108193899016419372223","name":"React Master","goals":[{"id":"2bfb0fad-856f-4d4d-82f4-343cd9171301","name":"React Beginner","description":"Finish a tutorial","achieved":true,"level":1,"order":1,"dueDate":"2017-03-13T16:28:06+0100","achievedDate":"2017-03-13T16:28:22+0100","comments":[],"unread":0,"steps":[]},{"id":"467629e1-5dc0-40ca-a528-f3158d71b710","name":"Reactionary","description":"Do a basic component","achieved":true,"level":1,"order":2,"dueDate":"2017-03-15T17:00:00+0100","achievedDate":"2017-03-14T06:34:33+0100","comments":[],"unread":0,"steps":[]},{"id":"efa7eee0-3371-4223-9222-0f3abff59794","name":"Meetup Attender","description":"Attend at least 1 meeting","achieved":true,"order":3,"dueDate":"2017-03-14T17:00:00+0100","achievedDate":"2017-03-14T06:43:20+0100","icon":"icon-users","comments":[],"unread":0,"steps":[]},{"id":"d14ebbe6-317b-4a01-ae4f-983feec8e43f","name":"X-Labs","description":"Learn about how X-Labs works and past work that's come out of X-Labs. Also visit http://x-team.com/x-labs. Start thinking about what you can contribute to X-Labs.","achieved":true,"level":1,"order":4,"dueDate":"2016-04-20T18:00:00+0200","achievedDate":"2017-03-14T08:14:00+0100","icon":"icon-cloud","comments":[],"unread":0,"steps":[]}]},{"id":"0793a3f3-82bd-47b9-8c93-98088e5981c7","userId":"108193899016419372223","name":"Blogger","goals":[{"id":"e6c95695-baf5-43bc-a750-8470a4fce546","name":"Blogger","description":"Setup blog","achieved":true,"level":1,"order":1,"dueDate":"2017-03-07T17:00:00+0100","achievedDate":"2017-03-14T06:39:07+0100","comments":[],"unread":0,"steps":[]},{"id":"e7357718-afd7-4d9b-aab2-8e298b95255a","name":"Conference Speaker","description":"Speak at a conference","achieved":true,"order":2,"dueDate":"2016-12-12T17:00:00+0100","achievedDate":"2017-03-14T07:17:35+0100","icon":"icon-connection","comments":[],"unread":0,"steps":[]},{"id":"f7ccba03-64ee-4e37-a295-6c097bf2dfa1","name":"Raise Your X","description":"Take a photo or be in a photo with you raising 'The X' with your arms to let the world know that X-Team is there when they need us.","achieved":true,"level":1,"order":3,"dueDate":"2016-12-06T17:00:00+0100","achievedDate":"2017-03-14T07:38:45+0100","icon":"icon-coin-dollar","comments":[],"unread":0,"steps":[]},{"id":"9455907e-6e9e-406c-89b1-b01a11846c1b","name":"X-Team.com Profile","description":"Join the league of the extraordinary on x-team.com by creating your own X-Team.com profile with your bio, skills, picture, and portfolio.","achieved":true,"level":1,"order":4,"dueDate":"2016-04-21T18:00:00+0200","achievedDate":"2017-03-14T08:15:04+0100","icon":"icon-superscript","comments":[],"unread":0,"steps":[]},{"id":"63193049-6952-428e-bde4-7ab5a744b633","name":"New Tool: The Wiki","description":"Gain access to the X-Team xHQ Wiki on Github. The wiki gives you access to a growing wealth of information to help you as an X-Teamer. Step: Read the Developers FAQ page.","achieved":true,"level":1,"order":5,"dueDate":"2016-06-15T18:00:00+0200","achievedDate":"2017-03-14T08:15:57+0100","icon":"icon-pen","comments":[],"unread":0,"steps":[]},{"id":"9364d25b-34a2-4026-97af-50abb26043e6","name":"Welcome Video","description":"Create your own intro video and introduce yourself to the community. View past intro videos in the xHQ Wiki.","achieved":true,"level":1,"order":6,"dueDate":"2016-06-29T18:00:00+0200","achievedDate":"2017-03-14T08:16:49+0100","icon":"icon-video","comments":[],"unread":0,"steps":[]},{"id":"708e416e-9ffc-4947-bb8b-823b7e8265d8","name":"Welcome Video","description":"Create your own intro video and introduce yourself to the community. View past intro videos in the xHQ Wiki.","achieved":true,"level":1,"order":7,"dueDate":"2016-07-13T18:00:00+0200","achievedDate":"2017-03-14T08:17:07+0100","icon":"icon-video","comments":[],"unread":0,"steps":[]}]},{"id":"d9d80175-1471-481d-be9f-9fa73733778a","userId":"108193899016419372223","name":"Docking Captain","goals":[{"id":"6aa36fba-d01f-4132-97c6-0b8427425d40","name":"Open Source Advocate","description":"Contribute to any open source project. Read \"How to contribute to open source communities\" to learn the many ways to contribute.","achieved":true,"level":2,"order":1,"dueDate":"2016-03-24T17:00:00+0100","achievedDate":"2017-03-14T08:13:03+0100","icon":"icon-shield","comments":[],"unread":0,"steps":[]}]}],"goals":[],"errors":[]};
const achievedGoals = [{"id":"2bfb0fad-856f-4d4d-82f4-343cd9171301","name":"React Beginner","description":"Finish a tutorial","achieved":true,"level":1,"order":1,"dueDate":"2017-03-13T16:28:06+0100","achievedDate":"2017-03-13T16:28:22+0100","comments":[],"unread":0,"steps":[]},{"id":"467629e1-5dc0-40ca-a528-f3158d71b710","name":"Reactionary","description":"Do a basic component","achieved":true,"level":1,"order":2,"dueDate":"2017-03-15T17:00:00+0100","achievedDate":"2017-03-14T06:34:33+0100","comments":[],"unread":0,"steps":[]},{"id":"efa7eee0-3371-4223-9222-0f3abff59794","name":"Meetup Attender","description":"Attend at least 1 meeting","achieved":true,"order":3,"dueDate":"2017-03-14T17:00:00+0100","achievedDate":"2017-03-14T06:43:20+0100","icon":"icon-users","comments":[],"unread":0,"steps":[]},{"id":"d14ebbe6-317b-4a01-ae4f-983feec8e43f","name":"X-Labs","description":"Learn about how X-Labs works and past work that's come out of X-Labs. Also visit http://x-team.com/x-labs. Start thinking about what you can contribute to X-Labs.","achieved":true,"level":1,"order":4,"dueDate":"2016-04-20T18:00:00+0200","achievedDate":"2017-03-14T08:14:00+0100","icon":"icon-cloud","comments":[],"unread":0,"steps":[]},{"id":"e6c95695-baf5-43bc-a750-8470a4fce546","name":"Blogger","description":"Setup blog","achieved":true,"level":1,"order":1,"dueDate":"2017-03-07T17:00:00+0100","achievedDate":"2017-03-14T06:39:07+0100","comments":[],"unread":0,"steps":[]},{"id":"e7357718-afd7-4d9b-aab2-8e298b95255a","name":"Conference Speaker","description":"Speak at a conference","achieved":true,"order":2,"dueDate":"2016-12-12T17:00:00+0100","achievedDate":"2017-03-14T07:17:35+0100","icon":"icon-connection","comments":[],"unread":0,"steps":[]},{"id":"f7ccba03-64ee-4e37-a295-6c097bf2dfa1","name":"Raise Your X","description":"Take a photo or be in a photo with you raising 'The X' with your arms to let the world know that X-Team is there when they need us.","achieved":true,"level":1,"order":3,"dueDate":"2016-12-06T17:00:00+0100","achievedDate":"2017-03-14T07:38:45+0100","icon":"icon-coin-dollar","comments":[],"unread":0,"steps":[]},{"id":"9455907e-6e9e-406c-89b1-b01a11846c1b","name":"X-Team.com Profile","description":"Join the league of the extraordinary on x-team.com by creating your own X-Team.com profile with your bio, skills, picture, and portfolio.","achieved":true,"level":1,"order":4,"dueDate":"2016-04-21T18:00:00+0200","achievedDate":"2017-03-14T08:15:04+0100","icon":"icon-superscript","comments":[],"unread":0,"steps":[]},{"id":"63193049-6952-428e-bde4-7ab5a744b633","name":"New Tool: The Wiki","description":"Gain access to the X-Team xHQ Wiki on Github. The wiki gives you access to a growing wealth of information to help you as an X-Teamer. Step: Read the Developers FAQ page.","achieved":true,"level":1,"order":5,"dueDate":"2016-06-15T18:00:00+0200","achievedDate":"2017-03-14T08:15:57+0100","icon":"icon-pen","comments":[],"unread":0,"steps":[]},{"id":"9364d25b-34a2-4026-97af-50abb26043e6","name":"Welcome Video","description":"Create your own intro video and introduce yourself to the community. View past intro videos in the xHQ Wiki.","achieved":true,"level":1,"order":6,"dueDate":"2016-06-29T18:00:00+0200","achievedDate":"2017-03-14T08:16:49+0100","icon":"icon-video","comments":[],"unread":0,"steps":[]},{"id":"708e416e-9ffc-4947-bb8b-823b7e8265d8","name":"Welcome Video","description":"Create your own intro video and introduce yourself to the community. View past intro videos in the xHQ Wiki.","achieved":true,"level":1,"order":7,"dueDate":"2016-07-13T18:00:00+0200","achievedDate":"2017-03-14T08:17:07+0100","icon":"icon-video","comments":[],"unread":0,"steps":[]},{"id":"6aa36fba-d01f-4132-97c6-0b8427425d40","name":"Open Source Advocate","description":"Contribute to any open source project. Read \"How to contribute to open source communities\" to learn the many ways to contribute.","achieved":true,"level":2,"order":1,"dueDate":"2016-03-24T17:00:00+0100","achievedDate":"2017-03-14T08:13:03+0100","icon":"icon-shield","comments":[],"unread":0,"steps":[]}];
const expectedTempoHistory = [{"tempo":-1},{"tempo":-2},{"tempo":-3},{"tempo":-4},{"tempo":-5},{"tempo":-6},{"tempo":-7},{"tempo":-8},{"tempo":-9},{"tempo":-10},{"tempo":-11},{"tempo":-12},{"tempo":-13},{"tempo":-14},{"tempo":-15},{"tempo":-16},{"tempo":-17},{"tempo":-18},{"tempo":-19},{"tempo":-20},{"tempo":-21},{"tempo":-22},{"tempo":-23},{"tempo":-24},{"tempo":-25},{"tempo":-26},{"tempo":-27},{"tempo":-28},{"tempo":-29},{"tempo":-30},{"tempo":-31},{"tempo":-32},{"tempo":-33},{"tempo":-34},{"tempo":-35},{"tempo":-36},{"tempo":-37},{"tempo":-38},{"tempo":-39},{"tempo":-40},{"tempo":-41},{"tempo":-42},{"tempo":-43},{"tempo":-44},{"tempo":-45},{"tempo":-46},{"tempo":-47},{"tempo":-48},{"tempo":-49},{"tempo":-50},{"tempo":-51},{"tempo":-52},{"tempo":-40}];

describe('Tempo Helper', () => {
  it('should compute weekly points properly', () => {
    expect(tempoHelper.getPoints(5, false)).to.equal(5);
    expect(tempoHelper.getPoints(1, false)).to.equal(1);
    expect(tempoHelper.getPoints(0, true)).to.equal(0);
    expect(tempoHelper.getPoints(0, false)).to.equal(-1);
  });

  it('should fetch all achieved goals', () => {
    expect(tempoHelper.getAllAchievedGoals(paths)).to.deep.equal(achievedGoals);
  });

  it('should fetch goals achieved within a date range', () => {
    const now = 1489489724409; // this should be a static timestamp
    const startingDate = now - (tempoHelper.day * 365);
    expect(tempoHelper.getAchievements(achievedGoals, startingDate, startingDate + tempoHelper.week).length).to.equal(0);
    expect(tempoHelper.getAchievements(achievedGoals, now - tempoHelper.week, now).length).to.equal(12);
  });

  it('should fetch prior year\'s tempo history', () => {
    const defaultTempoHistory = tempoHelper.getTempoHistory();
    expect(defaultTempoHistory.length).to.equal(53);
    expect(defaultTempoHistory[0].tempo).to.equal(-1);
    expect(defaultTempoHistory[52].tempo).to.equal(-53);
  });
});
